# DX 演算法 API 文件

## 路線 (Route)

代表一條路線的類別，包含路線節點與相關操作。

### 建構函式

```javascript
const route = new 路線();
```

建立一個新的路線實例，初始狀態為空路線。

### 屬性

#### `節點列表`
- **型別**: `number[]`
- **說明**: 取得節點列表的副本
- **範例**:
```javascript
const nodes = route.節點列表; // [1, 2, 3]
```

#### `長度`
- **型別**: `number`
- **說明**: 路線的長度
- **範例**:
```javascript
route.長度 = 10;
```

### 方法

#### `加入節點(節點編號)`
- **參數**: `節點編號` (number) - 要加入的節點編號
- **回傳**: `路線` - 目前路線物件（支援串聯呼叫）
- **說明**: 將節點加入路線末尾
- **範例**:
```javascript
route.加入節點(1).加入節點(2).加入節點(3);
```
- **錯誤**: 當輸入非數字時拋出 `TypeError`

#### `刪除(節點編號)`
- **參數**: `節點編號` (number) - 要刪除的節點編號
- **回傳**: `路線` - 目前路線物件（支援串聯呼叫）
- **說明**: 從路線中刪除指定節點
- **範例**:
```javascript
route.刪除(2); // 刪除編號為 2 的節點
```
- **錯誤**: 當輸入非數字時拋出 `TypeError`

#### `有成對的(節點編號1, 節點編號2)`
- **參數**:
    - `節點編號1` (number) - 第一個節點
    - `節點編號2` (number) - 第二個節點
- **回傳**: `boolean` - 是否存在成對節點
- **說明**: 判斷路線中是否包含連續的節點對
- **範例**:
```javascript
route.加入節點(1).加入節點(2);
console.log(route.有成對的(1, 2)); // true
```

#### `清除()`
- **回傳**: `路線` - 目前路線物件（支援串聯呼叫）
- **說明**: 清空路線中所有節點並重設長度為 0
- **範例**:
```javascript
route.清除();
```

#### `節點索引編號(節點編號)`
- **參數**: `節點編號` (number) - 要查詢的節點編號
- **回傳**: `number` - 節點索引，不存在時回傳 -1
- **說明**: 查找指定節點在路線中的索引位置
- **範例**:
```javascript
const index = route.節點索引編號(2); // 1
```

#### `指派(來源)`
- **參數**: `來源` (路線) - 要複製的來源路線
- **回傳**: `路線` - 目前路線物件（支援串聯呼叫）
- **說明**: 用來源路線的資料覆蓋目前路線
- **範例**:
```javascript
const newRoute = new 路線();
route.指派(newRoute);
```
- **錯誤**: 當來源不是路線實例時拋出 `TypeError`

#### `複製()`
- **回傳**: `路線` - 新的深複製路線
- **說明**: 建立目前路線的深度副本
- **範例**:
```javascript
const copiedRoute = route.複製();
```

#### `toString()`
- **回傳**: `string` - 路線的字串表示
- **說明**: 將路線轉為字串格式 `(長度)[節點列表]`
- **範例**:
```javascript
console.log(route.toString()); // (10)[1 2 3]
```

---

## 節點 (Node)

代表圖論中的頂點，管理節點間的關聯關係。

### 建構函式

```javascript
const node = new 節點();
```

### 屬性

#### `名稱`
- **型別**: `any`
- **說明**: 節點的名稱
- **初始值**: `null`

#### `編號`
- **型別**: `any`
- **說明**: 節點的唯一編號
- **初始值**: `null`

#### `資料`
- **型別**: `any`
- **說明**: 節點攜帶的資料
- **初始值**: `null`

#### `進入節點`
- **型別**: `Array`
- **說明**: 連接到此節點的所有節點清單
- **初始值**: `[]`

#### `離開節點`
- **型別**: `Array`
- **說明**: 從此節點連接出去的所有節點清單
- **初始值**: `[]`

#### `進入弧`
- **型別**: `Array`
- **說明**: 連接到此節點的所有弧清單
- **初始值**: `[]`

#### `離開弧`
- **型別**: `Array`
- **說明**: 從此節點連接出去的所有弧清單
- **初始值**: `[]`

### 方法

#### `新增進入節點(新節點)`
- **參數**: `新節點` (節點) - 要新增的進入節點
- **回傳**: `節點` - 目前節點物件（支援串聯呼叫）
- **說明**: 新增一個進入此節點的節點

#### `新增離開節點(新節點)`
- **參數**: `新節點` (節點) - 要新增的離開節點
- **回傳**: `節點` - 目前節點物件（支援串聯呼叫）
- **說明**: 新增一個從此節點離開的節點

#### `刪除進入節點(刪除節點)`
- **參數**: `刪除節點` (節點) - 要刪除的進入節點
- **回傳**: `節點` - 目前節點物件（支援串聯呼叫）
- **說明**: 刪除一個進入此節點的節點

#### `刪除離開節點(刪除節點)`
- **參數**: `刪除節點` (節點) - 要刪除的離開節點
- **回傳**: `節點` - 目前節點物件（支援串聯呼叫）
- **說明**: 刪除一個從此節點離開的節點

#### `新增進入弧(新弧)`
- **參數**: `新弧` (弧) - 要新增的進入弧
- **回傳**: `節點` - 目前節點物件（支援串聯呼叫）
- **說明**: 新增一個連接到此節點的弧

#### `新增離開弧(新弧)`
- **參數**: `新弧` (弧) - 要新增的離開弧
- **回傳**: `節點` - 目前節點物件（支援串聯呼叫）
- **說明**: 新增一個從此節點連接出去的弧

#### `刪除進入弧(刪除弧)`
- **參數**: `刪除弧` (弧) - 要刪除的進入弧
- **回傳**: `節點` - 目前節點物件（支援串聯呼叫）
- **說明**: 刪除一個連接到此節點的弧

#### `刪除離開弧(刪除弧)`
- **參數**: `刪除弧` (弧) - 要刪除的離開弧
- **回傳**: `節點` - 目前節點物件（支援串聯呼叫）
- **說明**: 刪除一個從此節點連接出去的弧

---

## 弧 (Arc)

代表圖論中的邊，連接兩個節點。

### 建構函式

```javascript
const arc = new 弧();
```

### 屬性

#### `名稱`
- **型別**: `any`
- **說明**: 弧的名稱
- **初始值**: `null`

#### `編號`
- **型別**: `any`
- **說明**: 弧的唯一編號
- **初始值**: `null`

#### `資料`
- **型別**: `any`
- **說明**: 弧攜帶的資料
- **初始值**: `null`

#### `開始節點`
- **型別**: `節點`
- **說明**: 弧的起始節點
- **初始值**: `null`

#### `結束節點`
- **型別**: `節點`
- **說明**: 弧的結束節點
- **初始值**: `null`

### 方法

#### `設定開始節點(節點)`
- **參數**: `節點` (節點) - 要設定的開始節點
- **回傳**: `弧` - 目前弧物件（支援串聯呼叫）
- **說明**: 設定弧的開始節點並建立雙向關聯
- **範例**:
```javascript
const node = new 節點();
node.編號 = 1;
node.名稱 = "起點";
arc.設定開始節點(node);
```
- **錯誤**: 當節點無效時拋出 `Error`

#### `設定結束節點(節點)`
- **參數**: `節點` (節點) - 要設定的結束節點
- **回傳**: `弧` - 目前弧物件（支援串聯呼叫）
- **說明**: 設定弧的結束節點並建立雙向關聯
- **錯誤**: 當節點無效時拋出 `Error`

#### `刪除開始節點()`
- **回傳**: `弧` - 目前弧物件（支援串聯呼叫）
- **說明**: 刪除弧的開始節點並清除關聯

#### `刪除結束節點()`
- **回傳**: `弧` - 目前弧物件（支援串聯呼叫）
- **說明**: 刪除弧的結束節點並清除關聯

---

## 距離矩陣 (Distance Matrix)

繼承自 dx-core 的矩陣類別，專門用於處理節點間距離計算。

### 靜態方法

#### `計算路線長度(節點序列)`
- **參數**: `節點序列` (Array) - 節點編號的序列
- **回傳**: `number` - 路線的總長度
- **說明**: 計算經過指定節點序列的總距離
- **範例**:
```javascript
const length = 距離矩陣.計算路線長度([0, 1, 2]);
```
- **錯誤**:
    - 當節點序列是路線實例時拋出 `TypeError`
    - 當距離矩陣資料不完整時拋出 `Error`

### 使用範例

```javascript
import { 距離矩陣 } from 'dx-algo';

// 假設有一個 3x3 的距離矩陣
const matrix = new 距離矩陣(3, 3);
// ... 設定矩陣值

// 計算路線 0 -> 1 -> 2 的總長度
const totalDistance = 距離矩陣.計算路線長度([0, 1, 2]);
```

---

## 通用設計模式

### 串聯呼叫

所有修改方法都回傳目前物件實例，支援串聯呼叫：

```javascript
route.加入節點(1)
     .加入節點(2)
     .加入節點(3)
     .刪除(2);

node.新增進入節點(otherNode)
    .新增離開弧(arc);

arc.設定開始節點(node1)
   .設定結束節點(node2);
```

### 錯誤處理

- **TypeError**: 當參數型別不正確時
- **Error**: 當操作邏輯有問題時（如節點無效）
- **RangeError**: 當索引超出範圍時

### 記憶體管理

- 所有 getter 方法回傳副本，避免意外修改內部狀態
- 雙向關聯自動管理，避免記憶體洩漏
- 刪除操作會自動清理相關關聯
